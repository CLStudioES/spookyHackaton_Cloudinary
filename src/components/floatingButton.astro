<script is:inline>
    let kioskMode = false;
    function enterKioskMode() {
        kioskMode = true;
        // Request fullscreen
        if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen();
        } else if (document.documentElement.mozRequestFullScreen) {
            // Firefox
            document.documentElement.mozRequestFullScreen();
        } else if (document.documentElement.webkitRequestFullscreen) {
            // Chrome, Safari and Opera
            document.documentElement.webkitRequestFullscreen();
        } else if (document.documentElement.msRequestFullscreen) {
            // IE/Edge
            document.documentElement.msRequestFullscreen();
        }

        // Optionally, you might want to hide all scrollbars
        document.body.style.overflow = "hidden";

        console.log("Entered kiosk-like mode");
    }

    // Function to exit kiosk mode
    function exitKioskMode() {
        kioskMode = false;
        if (document.exitFullscreen) {
            document.exitFullscreen();
        } else if (document.mozCancelFullScreen) {
            document.mozCancelFullScreen();
        } else if (document.webkitExitFullscreen) {
            document.webkitExitFullscreen();
        } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
        }

        // Restore cursor
        document.body.style.cursor = "auto";

        // Re-enable text selection
        document.body.style.userSelect = "auto";
        document.body.style.webkitUserSelect = "auto";
        document.body.style.msUserSelect = "auto";
        document.body.style.mozUserSelect = "auto";

        // Restore scrollbars
        document.body.style.overflow = "auto";

        console.log("Exited kiosk-like mode");
    }

    // Listen for fullscreen change
    document.addEventListener("astro:page-load", () => {
        const historyModeButton = document.getElementById("historyModeButton");
        const infoButton = document.getElementById("infoButton");
        const infoModal = document.getElementById("infoModal");
        const closeModal = document.getElementById("closeModal");
        if (historyModeButton) {
            historyModeButton.addEventListener("click", (e) => {
                e.preventDefault();
                if (kioskMode === false) {
                    enterKioskMode();
                } else {
                    exitKioskMode();
                }
            });
        }
        function toggleModal() {
            infoModal.classList.toggle("hidden");
        }

        if (infoButton && infoModal && closeModal) {
            infoButton.addEventListener("click", (e) => {
                e.preventDefault();
                toggleModal();
            });

            closeModal.addEventListener("click", toggleModal);

            // Close modal when clicking outside
            infoModal.addEventListener("click", (e) => {
                if (e.target === infoModal) {
                    toggleModal();
                }
            });

            // Close modal on escape key press
            document.addEventListener("keydown", (e) => {
                if (
                    e.key === "Escape" &&
                    !infoModal.classList.contains("hidden")
                ) {
                    toggleModal();
                }
            });
        }
    });
</script>

<div
    class="adminActions hidden lg:flex opacity-50 hover:scale-105 hover:opacity-100 transition-all duration-200"
>
    <input type="checkbox" name="adminToggle" class="adminToggle" />
    <a class="adminButton" href="#!"><img src="/img/icons/cog.svg" /></a>
    <div class="adminButtons">
        <a id="infoButton" title="Información" class="cursor-pointer">
            <img src="/img/icons/info.svg" />
        </a>
        <a
            id="groupButton"
            href="/gracias"
            target="_blank"
            title="Nosotros"
            class="cursor-pointer"
        >
            <img src="/img/icons/group.svg" />
        </a>
        <a id="historyModeButton" title="Modo historia" class="cursor-pointer">
            <img src="/img/icons/fullWindow.svg" />
        </a>
    </div>
</div>

<div
    id="infoModal"
    class="fixed inset-0 modal flex items-center justify-center animate-fade-in-up animate-duration-1000 p-4 hidden"
>
    <div class="absolute inset-0 bg-black bg-opacity-50"></div>

    <div class="relative w-[60vw] max-w-[1250px] max-h-[90vh]">
        <img
            class="w-full h-auto"
            src="/img/ui/grave_texture_1.png"
            alt="Background"
        />
        <div
            class="absolute inset-0 overflow-auto p-4 sm:p-6 md:p-8 lg:p-12 text-white"
        >
            <div
                class="relative z-10 max-w-[80%] flex flex-col justify-center mt-16 mx-auto"
            >
                <h2
                    class="text-xl sm:text-2xl md:text-3xl lg:text-4xl fuente-handwritte font-bold mb-4"
                >
                    Aconsejamos
                </h2>
                <p
                    class="text-sm sm:text-base md:text-lg fuente-urbanist font-extralight tracking-wider pt-2"
                >
                    1) Utilizar el modo kiosko para una mejor experiencia
                </p>
                <p
                    class="text-sm sm:text-base md:text-lg fuente-urbanist font-extralight tracking-wider pt-2"
                >
                    2) Una resolucion de 1920x1080 con aspecto de 16:9
                </p>
                <p
                    class="text-sm sm:text-base md:text-lg fuente-urbanist font-extralight tracking-wider pt-2"
                >
                    3) Paciencia, usamos Cloudinary y las peticiones de imágenes
                    y subidas fallan algunas veces. Puedes pulsar F5 o recargar
                    la página.
                </p>
                <p
                    class="text-sm sm:text-base md:text-lg fuente-urbanist font-extralight tracking-wider pt-2"
                >
                    4) Jugar la historia varias veces con distintas decisiones.
                </p>
                <p
                    class="text-sm sm:text-base md:text-lg fuente-urbanist font-extralight tracking-wider pt-2"
                >
                    5) Subir las fotos en aspecto 1:1 o verticales con la
                    persona centrada en la imagen y fondo visible.
                </p>
                <p
                    class="text-sm sm:text-base md:text-lg fuente-urbanist font-extralight tracking-wider pt-2"
                >
                    6) Consultar el botón inferior-izquierdo para ver
                    funcionalidades y apartados.
                </p>
                <h2
                    class="text-xl sm:text-2xl md:text-3xl lg:text-4xl fuente-handwritte font-bold my-4"
                >
                    Agradecimientos
                </h2>
                <p
                    class="text-sm sm:text-base md:text-lg fuente-urbanist font-extralight tracking-wider pt-2"
                >
                    1) Midudev & Cloudinary por la organización del evento.
                </p>
                <p
                    class="text-sm sm:text-base md:text-lg fuente-urbanist font-extralight tracking-wider pt-2"
                >
                    2) Comunidad dev y sus aportaciones constantes.
                </p>

                <button
                    id="closeModal"
                    class="text-xl fuente-handwritte font-bold pt-4 tracking-widest hover:animate-horizontal-vibration hover:animate-duration-fast hover:animate-iteration-count-infinite"
                    >Cerrar</button
                >
            </div>
        </div>
    </div>
</div>

<style>
    .modal {
        z-index: 200;
    }
    .adminActions {
        position: fixed;
        bottom: 35px;
        left: 35px;
        z-index: 100;
    }

    .adminButton {
        height: 60px;
        width: 60px;
        background-color: #3d224b;
        border-radius: 50%;
        display: block;
        color: #fff;
        text-align: center;
        position: relative;
        z-index: 1;
    }

    .adminButton i {
        font-size: 22px;
    }

    .adminButtons {
        position: absolute;
        width: 100%;
        bottom: 120%;
        text-align: center;
    }

    .adminButtons a {
        display: block;
        width: 45px;
        height: 45px;
        border-radius: 50%;
        text-decoration: none;
        margin: 10px auto 0;
        line-height: 1.15;
        color: #fff;
        opacity: 0;
        visibility: hidden;
        position: relative;
        box-shadow: 0 0 5px 1px rgba(51, 51, 51, 0.3);
    }

    .adminButtons a:hover {
        transform: scale(1.05);
    }

    .adminButtons a:nth-child(1) {
        background-color: rgba(173, 239, 19, 0.5);
        transition:
            opacity 0.2s ease-in-out 0.3s,
            transform 0.15s ease-in-out;
    }
    .adminButtons a:nth-child(2) {
        background-color: rgba(173, 239, 19, 0.5);
        transition:
            opacity 0.2s ease-in-out 0.3s,
            transform 0.15s ease-in-out;
    }
    .adminButtons a:nth-child(3) {
        background-color: rgba(173, 239, 19, 0.5);
        transition:
            opacity 0.2s ease-in-out 0.3s,
            transform 0.15s ease-in-out;
    }
    .adminButtons a:nth-child(4) {
        background-color: rgba(173, 239, 19, 0.5);
        transition:
            opacity 0.2s ease-in-out 0.3s,
            transform 0.15s ease-in-out;
    }

    .adminActions a img {
        height: 25px;
        width: 25px;
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
    }

    .adminToggle {
        -webkit-appearance: none;
        position: absolute;
        border-radius: 50%;
        top: 0;
        left: 0;
        margin: 0;
        width: 100%;
        height: 100%;
        cursor: pointer;
        background-color: transparent;
        border: none;
        outline: none;
        z-index: 2;
        transition: box-shadow 0.2s ease-in-out;
        box-shadow: 0 3px 5px 1px rgba(51, 51, 51, 0.3);
    }

    .adminToggle:hover {
        box-shadow: 0 3px 6px 2px rgba(51, 51, 51, 0.3);
    }

    .adminToggle:checked ~ .adminButtons a {
        opacity: 1;
        visibility: visible;
    }
</style>
