---
import Layout from "../layouts/Layout.astro";
---

<Layout title="Spooky Hackaton-Crea tu personaje">
    <main class="lg:overflow-hidden">
        <div class="relative h-screen w-screen">
            <!-- Bottom layer -->
            <div class="absolute inset-0 z-0">
                <div class="moon"></div>
            </div>
            <!-- Second layer -->
            <div
                class="absolute inset-0 z-10 bg-[url('/img/ui/backgrounds/composition3/3.png')] bg-cover bg-left lg:bg-center bg-no-repeat"
            >
            </div>
            <div
                class="absolute inset-0 z-10 bg-[url('/img/ui/backgrounds/composition3/3.png')] bg-cover bg-left lg:bg-center bg-no-repeat"
            >
            </div>
            <!-- Third layer -->
            <div class="absolute inset-0 z-20">
                <div id="foglayer_01" class="fog hidden lg:flex">
                    <div class="image01"></div>
                    <div class="image02"></div>
                </div>
                <div id="foglayer_02" class="fog hidden lg:flex">
                    <div class="image01"></div>
                    <div class="image02"></div>
                </div>
                <div id="foglayer_03" class="fog hidden lg:flex">
                    <div class="image01"></div>
                    <div class="image02"></div>
                </div>
            </div>
            <!--Fourth layer -->
            <div
                transition:name="grave"
                class="absolute inset-0 z-30 bg-[url('/img/ui/backgrounds/composition3/2.png')] bg-cover bg-left lg:bg-center bg-no-repeat"
            >
            </div>
            <!--Fifth layer -->
            <div
                class="absolute inset-0 z-40 bg-[url('/img/ui/backgrounds/composition3/1.png')] bg-cover bg-left lg:bg-center bg-no-repeat"
            >
            </div>
            <!--Front layer -->
            <div class="absolute inset-0 z-50">
                <section
                    class="min-h-screen grid grid-cols-1 lg:grid-cols-2 gap-4"
                >
                    <article
                        class="flex flex-col items-center justify-center p-4 lg:p-8 ml-36"
                    >
                        <header class="mb-8 -mt-32">
                            <span
                                class="h-24 w-24 lg:h-60 lg:w-60 bg-white rounded-full block"
                            >
                            </span>
                            <div class="text-center w-full max-w-md">
                                <h2
                                    id="labelNombre"
                                    class="text-sm lg:text-3xl graven-text uppercase truncate"
                                >
                                    Nombre del difunto
                                </h2>
                                <p
                                    class="graven-text uppercase truncate pt-1 lg:pt-3 text-xs lg:text-2xl"
                                >
                                    <span id="labelFNacimiento"
                                        >2024-10-22</span>
                                </p> - 2024-10-22
                            </div>
                        </header>
                    </article>
                    <footer class="mt-52 w-full max-w-md overflow-clip">
                        <p
                            id="labelPalabras"
                            class="graven-text uppercase text-xs lg:text-2xl text-center px-4"
                        >
                            "FINIS OMNIS VITA MORS EST"
                        </p>
                    </footer>
                </section>
                <article
                    class="flex flex-col items-center justify-center p-4 lg:p-8"
                >
                    <div class="relative w-full max-w-3xl">
                        <img
                            transition:name="grave"
                            src="/img/elements/pergamino.png"
                            alt="Grave"
                            class="w-full h-auto"
                        />
                        <div class="absolute inset-0 flex flex-col p-8">
                            <h2
                                class="text-3xl lg:text-5xl fuente-handwritte font-bold mb-4 pl-12 pt-36"
                            >
                                ¿Quién eres?
                            </h2>
                            <div class="flex-grow flex flex-col pl-12">
                                <div class="flex-grow">
                                    <h3
                                        class="text-xl lg:text-3xl fuente-handwritte font-bold pb-4 pt-4"
                                    >
                                        Nombre y apellidos:
                                    </h3>
                                    <input
                                        id="inputName"
                                        type="text"
                                        placeholder="Nombre y apellidos del difunto"
                                        class="w-full max-w-md bg-white bg-opacity-50 rounded-md p-2 text-sm lg:text-base focus:outline-none focus:ring-2 focus:ring-trickle-purple focus:border-transparent"
                                    />
                                    <h3
                                        class="text-3xl fuente-handwritte font-bold pt-4 mt-12"
                                    >
                                        Fecha de nacimiento
                                    </h3>
                                    <input
                                        id="inputFnacimiento"
                                        type="date"
                                        placeholder="Fecha de nacimiento del difunto"
                                        class="mt-3 w-full max-w-md bg-white bg-opacity-50 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-trickle-purple focus:border-transparent"
                                    />
                                    <h3
                                        class="text-3xl fuente-handwritte font-bold pt-4 mt-12"
                                    >
                                        Últimas palabras
                                    </h3>
                                    <textarea
                                        maxlength="70"
                                        id="inputPalabras"
                                        placeholder="Últimas palabras del difunto"
                                        class="mt-3 mb-12 w-full max-w-md bg-white bg-opacity-50 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-trickle-purple focus:border-transparent"
                                    ></textarea>
                                    <br />
                                    <button
                                        class="text-3xl fuente-handwritte font-bold pt-4 hover:animate-horizontal-vibration hover:animate-duration-fast hover:animate-iteration-count-infinite"
                                        >Añadir rostro
                                    </button>
                                </div>
                                <a
                                    id="saveCharacterButton"
                                    class="text-4xl mb-12 text-center fuente-handwritte font-bold mt-auto pt-12 tracking-widest hover:animate-horizontal-vibration hover:animate-duration-fast hover:animate-iteration-count-infinite"
                                    >Guardar</a
                                >
                            </div>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </main>
</Layout>

<script is:inline>
    function updateLabels() {
        const inputName = document.getElementById("inputName");
        const inputFnacimiento = document.getElementById("inputFnacimiento");
        const inputPalabras = document.getElementById("inputPalabras");
        const nombreDisplay = document.getElementById("labelNombre");
        const labelFNacimiento = document.getElementById("labelFNacimiento");
        const labelPalabras = document.getElementById("labelPalabras");

        if (inputName) {
            inputName.addEventListener("input", function () {
                nombreDisplay.textContent = this.value || "Nombre del difunto";
            });
        }

        if (inputFnacimiento) {
            inputFnacimiento.addEventListener("input", function () {
                labelFNacimiento.textContent = this.value || "2024-10-22";
            });
        }

        if (inputPalabras) {
            inputPalabras.addEventListener("input", function () {
                labelPalabras.textContent = this.value
                    ? `"${this.value}"`
                    : "FINIS OMNIS VITA MORS EST";
            });
        }
    }

    updateLabels();
    setTimeout(updateLabels, 100);
    document.addEventListener("DOMContentLoaded", updateLabels);

    function updateButtonState() {
        const inputName = document.getElementById("inputName");
        const inputFnacimiento = document.getElementById("inputFnacimiento");
        const inputPalabras = document.getElementById("inputPalabras");
        const saveButton = document.getElementById("saveCharacterButton");

        if (inputName && inputFnacimiento && inputPalabras && saveButton) {
            const isFormFilled =
                inputName.value.trim() !== "" &&
                inputFnacimiento.value.trim() !== "" &&
                inputPalabras.value.trim() !== "";

            if (isFormFilled) {
                saveButton.classList.remove(
                    "pointer-events-none",
                    "opacity-50",
                );
            } else {
                saveButton.classList.add("pointer-events-none", "opacity-50");
            }
        }
    }

    function initializeForm() {
        updateLabels();
        updateButtonState();

        const inputs = [
            document.getElementById("inputName"),
            document.getElementById("inputFnacimiento"),
            document.getElementById("inputPalabras"),
        ];

        inputs.forEach((input) => {
            if (input) {
                input.addEventListener("input", () => {
                    updateLabels();
                    updateButtonState();
                });
            }
        });
    }

    initializeForm();
    setTimeout(initializeForm, 100);
    document.addEventListener("DOMContentLoaded", initializeForm);
</script>

<style>
    .moon {
        position: absolute;
        width: 35vmin;
        height: 35vmin;
        right: 5vmin;
        top: 5vmin;
        opacity: 1;
        border-radius: 100%;
        animation: start-moon 3s ease 0s 1;
        background: radial-gradient(
                circle at 50% 50%,
                #e7c89fc5 0% 7vmin,
                #f3e9b6 80% 7vmin,
                #ffffff00 7.25vmin 100%
            ),
            #fff;
        box-shadow:
            0 0 8em 4em #f3e9b6,
            0 0 8em -16em #f1c75d inset,
            0 0 20px 5px #f1c75d;
    }

    .moon:before {
        content: "";
        background: radial-gradient(
            circle at 100% 60%,
            #ffffff00 0% 60%,
            #f3e9b6 75% 100%
        );
        width: 100%;
        height: 100%;
        position: absolute;
        top: 0%;
        left: 0%;
        border-radius: 100%;
    }

    .moon:after {
        content: "";
        background: radial-gradient(
            circle at 0% 40%,
            #f0c5573f 0% 60%,
            #f3e9b6 75% 100%
        );
        width: 4.5vmin;
        height: 4.5vmin;
        position: absolute;
        top: 20%;
        left: 20%;
        border-radius: 100%;
        filter: blur(2px);
    }
</style>
